name: workflow status
on : push
jobs:
  GetWorkflowstatus:
    runs-on : ubuntu-latest
    steps:
      - uses: martialonline/workflow-status@v3
        id: check
      - run: echo "Workflow  Failed" >> $GITHUB_OUTPUT
        if : steps.check.outputs.status =='failure'
      - run: echo "Workflow was cancelled" >> $GITHUB_OUTPUT
        if: steps.check.outputs.status == 'cancelled'
      - run: echo "Workflow is successful"  >> $GITHUB_OUTPUT
        if: steps.check.outputs.status == 'success'

  Notfiy:
    needs: GetWorkflowstatus
    runs-on: ubuntu-latest
    steps:
    - uses: neonidian/teams-notify-build-status@v3
      with:
        webhookUrl: ${{ secrets.TEAMS_WEBHOOK_URL }}
        message: "The Deployment workflow is ${{steps.check.outputs.status}} " 
